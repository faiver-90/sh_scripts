#!/bin/bash

# Проверка наличия аргумента
if [ -z "$1" ]; then
  echo "Ошибка: Не указан комментарий для коммита."
  echo "Использование: $0 'комментарий для коммита'"
  exit 1
fi

COMMENT=$1

# Добавляем изменения в индекс
echo "Добавляем изменения в индекс..."
git add .
if [ $? -ne 0 ]; then
  echo "Ошибка: Не удалось добавить изменения в индекс."
  exit 1
fi

# Выполняем коммит с указанным комментарием
echo "Выполняем коммит с комментарием: $COMMENT"
git commit -m "$COMMENT" --no-verify
if [ $? -ne 0 ]; then
  echo "Ошибка: Не удалось выполнить коммит."
  exit 1
fi

# Отправляем изменения в удаленный репозиторий
echo "Отправляем изменения в удаленный репозиторий..."
git push
if [ $? -ne 0 ]; then
  echo "Ошибка: Не удалось отправить изменения в удаленный репозиторий."
  exit 1
fi

echo "Коммит успешно выполнен и изменения отправлены в удаленный репозиторий."